
rules_version = '2';

// Reglas de seguridad para Firebase Storage
service firebase.storage {
  // Coincide con el bucket de tu proyecto
  match /b/{bucket}/o {
    
    // Permite el acceso a todos los archivos y carpetas
    match /{allPaths=**} {
    
      // Permite la lectura pública de todos los archivos.
      // Esto es útil para que las imágenes se puedan mostrar fácilmente en la app.
      allow read;

      // Permite la escritura (subir, actualizar, eliminar) SÓLO si el usuario está autenticado.
      // Esta es la regla de seguridad clave que soluciona el problema de subida.
      allow write: if request.auth != null;
    }
  }
}
