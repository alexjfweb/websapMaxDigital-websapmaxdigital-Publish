rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Las imágenes de perfil, platos, QRs, etc., deben ser legibles públicamente
    // para que la aplicación pueda mostrarlas sin necesidad de que el usuario inicie sesión
    // (ej. en el menú público).
    match /{allPaths=**} {
      allow read: if true;
      
      // La escritura (subida, modificación, eliminación) de archivos solo
      // debe ser permitida a usuarios autenticados.
      allow write: if request.auth != null;
    }
  }
}
